(function(e){function t(t){for(var a,n,s=t[0],c=t[1],l=t[2],d=0,g=[];d<s.length;d++)n=s[d],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&g.push(o[n][0]),o[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(g.length)g.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],a=!0,s=1;s<r.length;s++){var c=r[s];0!==o[c]&&(a=!1)}a&&(i.splice(t--,1),e=n(n.s=r[0]))}return e}var a={},o={app:0},i=[];function n(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=a,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"012b":function(e,t,r){},"0f06":function(e,t){var r={dev:!0,firebase:!0,verbose:!1};e.exports=r},1035:function(e,t,r){"use strict";var a=r("012b"),o=r.n(a);o.a},1042:function(e,t,r){"use strict";var a=r("ee6e"),o=r.n(a);o.a},2576:function(e,t,r){},3097:function(e,t,r){(function(t){r("d3b7");var a=r("7338"),o=r("0f06"),i={baseURL:"http://localhost:8095/",headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:6e4,totalTimeout:3e5,maxRetries:5,retry:!0};o.dev&&(i.baseURL="http://localhost:8095/"),i.get=function(e){return new Promise((function(t,r){if("string"===typeof e){var a=e;e={url:a}}e.method="get",i.request(e).then((function(e){t(e)})).catch((function(e){return r(e)}))}))},i.post=function(e){return new Promise((function(t,r){if("string"===typeof e){var a=e;e={url:a}}e.method="post",e.data=e.body||e.data||"",i.request(e).then((function(e){t(e)})).catch((function(e){return r(e)}))}))},i.request=function(e){return new Promise((function(t,r){var a=!1,o=function(e){a=!0,t(e)},s=function(e){r(e)};void 0===e.retry&&(e.retry=i.retry),e.nrOfAttempts=e.nrOfAttempts||0,e.maxRetries=e.maxRetries||i.maxRetries,e.baseURL=e.baseURL||i.baseURL,e.timeout=e.timeout||i.timeout,e.totalTimeout=e.totalTimeout||i.totalTimeout,e.url=e.url||i.baseURL,e.headers=e.headers||i.headers,e.data=e.data||"",n(e,o,s),setTimeout((function(){a||r(new Error("Timeout when requesting data"))}),e.totalTimeout)}))};var n=function e(r,o,i){r.nrOfAttempts++,a(r).then((function(e){o(e)})).catch((function(a){r.nrOfAttempts>r.maxRetries||!r.retry?i(a):(t.bugsnagClient.notify(a),setTimeout((function(){e(r,o,i)}),200*r.nrOfAttempts*r.nrOfAttempts))}))};e.exports=i}).call(this,r("c8ba"))},3507:function(e,t,r){"use strict";var a=r("ac83"),o=r.n(a);o.a},5462:function(e,t,r){"use strict";var a=r("fc1a"),o=r.n(a);o.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),o=(r("4160"),r("4fad"),r("159b"),r("3835")),i=r("c6de"),n=r.n(i),s=function(e){return Object.entries(n.a).forEach((function(t){var r=Object(o["a"])(t,2),a=r[0],i=r[1];e.component(a,i)})),e},c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view"),e.isLoading?r("spinner"):e._e(),r("transition",{attrs:{name:"slide"}},[e.toast?r("toast",{attrs:{success:1===e.toast.state,error:2===e.toast.state,danger:3===e.toast.state}},[e._v(e._s(e.toast.msg))]):e._e()],1)],1)},l=[],u=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},d=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"spinner-mask"},[r("div",{staticClass:"spinner"},[r("div",{staticClass:"rect1"}),r("div",{staticClass:"rect2"}),r("div",{staticClass:"rect3"}),r("div",{staticClass:"rect4"}),r("div",{staticClass:"rect5"})])])}],g=(r("c565"),r("2877")),m={},h=Object(g["a"])(m,u,d,!1,null,"f8c4a940",null),f=h.exports,p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"fade"}},[r("div",{class:{success:e.success,warning:e.warning,danger:e.danger},attrs:{id:"toast"}},[e._t("default")],2)])},v=[],x={props:{success:{type:Boolean,default:!1},warning:{type:Boolean,default:!1},danger:{type:Boolean,default:!1}}},b=x,y=(r("1035"),Object(g["a"])(b,p,v,!1,null,"0bc4c180",null)),w=y.exports,k=r("2f62"),_={name:"app",components:{Spinner:f,Toast:w},computed:Object(k["b"])(["isLoading","flags"]),mounted:function(){console.log("drawer yao")},data:function(){return{toast:null}},created:function(){this.handleResize(),window.addEventListener("resize",this.handleResize)},destroyed:function(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){var e=window.innerWidth,t="xs";e>767&&(t="sm"),e>1023&&(t="md"),e>1199&&(t="lg"),this.$store.commit("setDevice",t)}}},L=_,S=(r("7c55"),Object(g["a"])(L,c,l,!1,null,null,null)),C=S.exports,I=r("8c4f"),j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"drawer"}},[r("div",{staticClass:"npc-card"},[e.images[e.index]?r("div",{staticStyle:{order:"2",display:"flex",width:"60%"}},[r("div",{staticStyle:{margin:"auto 0"}},[r("h3",{staticStyle:{width:"100%","text-align":"center"}},[e._v("Image "+e._s(e.index+1))]),r("img",{ref:"imageDetector",staticClass:"imageDetector",attrs:{src:"http://localhost:8095/getImage/"+e.images[e.index]},on:{click:e.createLabel}}),e.creatingLabel?r("Box",{attrs:{top:e.creatingBox.top,left:e.creatingBox.left,width:e.creatingBox.width,height:e.creatingBox.height,label:e.creatingBox.label,color:e.creatingBox.color}}):e._e(),e._l(e.boxes[e.index],(function(t,a){return r("div",{key:a,staticStyle:{"z-index":"1000"}},[r("Box",{attrs:{top:t.top,left:t.left,width:t.width,height:t.height,label:t.label},on:{click:function(t){return e.removeBox(e.index,a)}}})],1)}))],2)]):e._e(),r("section",[r("h3",[e._v("Manual drawer")]),r("separator",{attrs:{width:"190px",backgroundColor:"black",height:"2px"}}),e._m(0),r("div",{staticClass:"inline"},[r("div",{staticStyle:{display:"flex","flex-direction":"column",width:"50%"}},[r("b",[e._v("Name of project:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.projectName,expression:"projectName"}],staticStyle:{height:"30px","margin-top":"5px"},attrs:{placeholder:"carLabels"},domProps:{value:e.projectName},on:{input:function(t){t.target.composing||(e.projectName=t.target.value)}}})]),r("div",{staticStyle:{display:"flex","flex-direction":"column","margin-left":"20px"}},[r("b",[e._v("Allowed filetypes:")]),r("div",{staticClass:"inline"},[r("el-checkbox",{staticStyle:{"margin-right":"10px","margin-top":"5px"},attrs:{options:[{value:!0,label:"Images"}]},model:{value:e.allowImages,callback:function(t){e.allowImages=t},expression:"allowImages"}}),r("el-checkbox",{staticStyle:{"margin-right":"10px","margin-top":"5px"},attrs:{options:[{value:!0,label:"Videos"}]},model:{value:e.allowVideos,callback:function(t){e.allowVideos=t},expression:"allowVideos"}})],1)]),r("div",{staticStyle:{display:"flex","flex-direction":"column","margin-left":"20px"}},[r("div",{staticStyle:{display:"block",position:"relative",width:"100%"}},[r("b",[e._v("Limit the maximum images loaded")]),r("el-tooltip",[e._v(" If you have a huge scope, or slow computer. Limit the images in scope. "),r("br"),e._v(" Each image is only the name, not entire image (not implemented yet) ")])],1),r("div",{staticClass:"inline"},[r("el-checkbox",{staticStyle:{"margin-right":"10px","margin-top":"5px"},attrs:{options:[{value:!0,label:"Max images"}]},model:{value:e.maxImagesCheck,callback:function(t){e.maxImagesCheck=t},expression:"maxImagesCheck"}})],1)])]),!0===this.maxImagesCheck[0]?r("div",[r("b",[e._v("Maximum images in scope")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.maxImages,expression:"maxImages"}],staticStyle:{height:"30px","margin-top":"5px"},attrs:{placeholder:"1000",type:"number"},domProps:{value:e.maxImages},on:{input:function(t){t.target.composing||(e.maxImages=t.target.value)}}})]):e._e(),!0===this.allowVideos[0]?r("div",[r("b",[e._v("Delay between images from video (1000 is 1 second, 0 is every frame)")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.frameDelay,expression:"frameDelay"}],staticStyle:{height:"30px","margin-top":"5px"},attrs:{placeholder:"1000",type:"number"},domProps:{value:e.frameDelay},on:{input:function(t){t.target.composing||(e.frameDelay=t.target.value)}}})]):e._e(),r("div",{staticStyle:{display:"block",position:"relative",width:"100%"}},[r("b",[e._v("Image directory: (?)")]),r("el-tooltip",[e._v(" Where the images/videos are stored. Give an absolute path and not a relative. "),r("br"),e._v(" This path is then read by the server and all images copied "),r("br"),e._v(" to the servers /data/${projectName}/ folder. ")])],1),r("div",{staticClass:"inline"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.src,expression:"src"}],staticStyle:{height:"30px",width:"50%"},attrs:{placeholder:"/data/passages"},domProps:{value:e.src},on:{input:function(t){t.target.composing||(e.src=t.target.value)}}}),r("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.searchImages}},[e._v("Search")])],1),r("div",{staticStyle:{display:"block",position:"relative",width:"100%"}},[r("b",[e._v("Custom shortcuts for different detection objects, add them below. (?)")]),r("el-tooltip",[e._v(" Shortcuts for handling images. Default shortcuts are enter, "),r("br"),e._v(" right-arrow for next image and back, left-arrow for previous image. ")])],1),r("div",{staticClass:"inline"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.shortcut.key,expression:"shortcut.key"}],staticStyle:{height:"30px",width:"30%"},attrs:{placeholder:"key"},domProps:{value:e.shortcut.key},on:{input:function(t){t.target.composing||e.$set(e.shortcut,"key",t.target.value)}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.shortcut.model,expression:"shortcut.model"}],staticStyle:{height:"30px",width:"30%","margin-left":"2px"},attrs:{placeholder:"model"},domProps:{value:e.shortcut.model},on:{input:function(t){t.target.composing||e.$set(e.shortcut,"model",t.target.value)}}}),r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{secondary:""},on:{click:e.addShortcut}},[e._v("Add")])],1),r("table",{staticStyle:{border:"1px solid #f0f0f0"},attrs:{id:"shortcutTable"}},[e._m(1),r("tbody",e._l(e.shortcut.shortcuts,(function(t){return r("tr",{key:t.key,staticStyle:{"margin-top":"5px"}},[r("td",[e._v(e._s(t.key))]),r("td",[e._v(e._s(t.model))]),r("td",[r("el-button",{attrs:{danger:"",secondary:""},on:{click:function(r){return e.deleteShortcut(t)}}},[e._v("Radera")])],1)])})),0)]),r("div",{staticStyle:{"text-aling":"center",margin:"30px auto -15px auto","font-size":"20px"}},[r("b",[e._v(e._s(e.index))]),e._v(" out of "),r("b",[e._v(e._s(e.total))]),e._v(" images processed ")]),r("br"),r("br"),r("div",{staticClass:"inline",staticStyle:{"justify-content":"center"}},[r("el-button",{staticStyle:{height:"45px","font-size":"20px","margin-right":"10px"},on:{click:e.saveProgress}},[e._v("Save progress")]),r("el-button",{staticStyle:{height:"45px","font-size":"20px"},attrs:{secondary:""},on:{click:e.loadProgress}},[e._v("Load progress")])],1),0!==e.drawerFlag.state?r("p",{class:{errorMessage:2===e.drawerFlag.state,confirmMessage:1===e.drawerFlag.state,loadingMessage:3===e.drawerFlag.state},staticStyle:{"margin-top":"10px"}},[r("font-awesome-icon",{staticClass:"icon",class:3===e.drawerFlag.state?"fa-spin":null,attrs:{icon:["fas",2===e.drawerFlag.state?"exclamation-triangle":1===e.drawerFlag.state?"check-circle":"spinner"]}}),e._v(" "+e._s(e.drawerFlag.msg)+" ")],1):e._e()],1)])])},P=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[r("b",[e._v("Manually draw detection lines")]),r("br"),r("br"),e._v(" Select a directory where your images is stored, the program will open all the images and let you draw rectangles to mark objects for image recognition. "),r("br"),r("br"),e._v(" Images will be processes and saved to a subfolder in the same directory. Rectangles are drawed for the YOLOv3 engine. "),r("br"),r("br")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("Key")]),r("th",[e._v("Model")]),r("th",[e._v("Action")])])])}],O=(r("a434"),r("a9e3"),r("96cf"),r("1da1")),R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.text?r("div",{staticClass:"separator",class:{noMargin:e.noMargin}},[e._v(e._s(e.text))]):r("div",{staticClass:"separatorNoText",class:{noMargin:e.noMargin},style:{backgroundColor:e.backgroundColor,width:e.width,height:e.height}})},T=[],B={props:{text:String,noMargin:{type:Boolean,default:!1},width:{type:String,required:!1},height:{type:String,required:!1},backgroundColor:{type:String,required:!1}}},N=B,$=(r("3507"),Object(g["a"])(N,R,T,!1,null,"df9b05c6",null)),F=$.exports,D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box-wrapper",on:{click:e.next}},[r("div",{staticClass:"box",style:{top:e.top+"px",left:e.left+"px",width:e.width+"px",height:e.height+"px",border:"2px solid "+e.color}},[r("p",{staticStyle:{color:"cyan"}},[e._v(e._s(e.label))])])])},E=[],M={name:"Box",props:{top:{required:!0},left:{required:!0},width:{required:!0},height:{required:!0},label:{required:!0,type:String},color:{required:!1,type:String,default:"#90ee90"}},methods:{next:function(){var e=this;!0!==this.disabled&&(this.$emit("click"),setTimeout((function(){e.$el&&e.$el.blur&&e.$el.blur()}),400))}}},q=M,A=(r("5462"),Object(g["a"])(q,D,E,!1,null,"75aca30e",null)),V=A.exports,z=(r("99af"),r("c975"),0),U=function(e){var t={serviceName:e,print:!0,separateFirstLog:!0,types:{debug:!0,warning:!0,info:!0,todo:!0,fixme:!0,success:!0,sequence:!1},history:{error:[],debug:[],warning:[],info:[],todo:[],fixme:[],success:[],sequence:[]},count:{error:0,debug:0,warning:0,info:0,todo:0,fixme:0,success:0,sequence:0},color:{debug:"blue",warning:"orange",info:"blue",todo:"purple",fixme:"red",success:"green",error:"red"},loginTime:new Date,logToConsole:function(e,r){if(t.types[e]&&t.print){0===z&&!0===t.separateFirstLog&&console.log("\n\n-----------------------\n        Load ðŸŽ‰\n-----------------------\n\n      "),z++,console.log("%c ".concat(t.serviceName," [").concat(e.toUpperCase(),"] (").concat(t.count[e],"): ").concat(r),"color: ".concat(t.color[e]));for(var a=arguments.length,o=new Array(a>2?a-2:0),i=2;i<a;i++)o[i-2]=arguments[i];var n;if(o)(n=console).log.apply(n,o)}},getTime:function(){return(new Date-t.loginTime)/1e3},storeToHistory:function(e,r){switch(e){case"error":break;case"info":break;case"warning":break;default:break}var a=t.history[e].length-1;if(a>=0){var o=t.history[e][a],i=o.indexOf(":")+2,n=o.substring(i,o.length);if(n===r){var s=o.indexOf(")"),c=-1===s?2:Number(o.substring(2,s))+1;return t.history[e][a]="(x".concat(c,") ").concat(t.getTime(),": ").concat(r),void(t.count[e]+=1)}}t.history[e].push("".concat(t.getTime(),": ").concat(r)),t.count[e]+=1},latest:function(){console.log(t.stringify("sequence",10))},error:function(e){console.trace("ERROR: (".concat(t.count["error"],")"),e),t.latest(),t.storeToHistory("error",e)},stringify:function(e,r){var a=t.history[e],o="",i=r;(!i||i>a.length)&&(i=a.length);for(var n=a.length-1;n>=a.length-i;n-=1)o+="".concat(a[n],"\n");return o}};return(t.initialize=function(){var e=function(e){t[e]=function(r){for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];t.logToConsole.apply(t,[e,r].concat(o)),t.storeToHistory(e,r)}};for(var r in t.types)e(r)})(),t},X=r("3097"),Y=r.n(X),H=r("4328"),J=r.n(H),W={baseUrl:"/drawer/"};W.searchImages=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={url:"searchImages",timeout:3e6,data:J.a.stringify(t),retry:!1},e.next=3,Y.a.post(r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W.saveProgress=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={url:"saveProgress",timeout:3e4,data:J.a.stringify(t),retry:!1},e.next=3,Y.a.post(r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W.loadProgress=function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={url:"loadProgress?projectName=".concat(t),retry:!1},e.next=3,Y.a.get(r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var G=W,K=U("Drawer"),Q={components:{Box:V,Separator:F},data:function(){return{mouse:{x:0,y:0},creatingLabel:!1,creatingBox:{top:600,left:900,height:50,width:30,color:"orange",label:""},boxes:[],shortcut:{key:"",model:"",shortcuts:[{key:"enter",model:"Next image"},{key:"back",model:"Previous image"},{key:"escape",model:""},{key:"a",model:"Outer road mark line"},{key:"s",model:"Center road mark line"},{key:"d",model:"truck"}]},maxImages:0,right:!0,isAsset:!0,projectName:"DATX02",src:"/Users/jesper/Projects/JNSystems/Python/DATX02-Vehicle-Automation/computerVision/manualDetection/data",images:[],total:0,index:0,frameDelay:500,allowImages:[!0],allowVideos:[!0],maxImagesCheck:[!1],drawerFlag:{state:0,msg:""}}},props:{},mounted:function(){var e=this;this.$store.commit("resetLoading"),window.addEventListener("keydown",(function(t){e.checkListeners(String.fromCharCode(t.keyCode),t.keyCode)})),window.addEventListener("mousemove",(function(t){e.trackmouse(t)})),this.searchImages()},computed:{},methods:{searchImages:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){var r,a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.setFlag(3,"Loading images"),e.$store.commit("setLoading"),t.prev=2,null!==e.src&&""!==e.src){t.next=7;break}return e.$store.commit("resetLoading"),e.setFlag(2,"Path to image diretory not found"),t.abrupt("return");case 7:return r=!0===e.allowImages[0],a=!0===e.allowVideos[0],o={projectName:e.projectName,imageSrc:e.src,frameDelay:e.frameDelay,allowImages:r,allowVideos:a,maxImages:e.maxImages},t.next=12,G.searchImages(o);case 12:i=t.sent,e.total=i.total,e.images=i.images,e.setFlag(1,"Images loaded"),e.$store.commit("resetLoading"),t.next=24;break;case 19:t.prev=19,t.t0=t["catch"](2),K.error(t.t0),e.$store.commit("resetLoading"),e.setFlag(2,t.t0.message);case 24:case"end":return t.stop()}}),t,null,[[2,19]])})))()},setFlag:function(e,t){var r=this;this.drawerFlag.state=e,this.drawerFlag.msg=t,setTimeout((function(){r.drawerFlag.state=0}),3e3)},addShortcut:function(){void 0!==this.shortcut.key&&""!==this.shortcut.key?void 0!==this.shortcut.model&&""!==this.shortcut.model?this.shortcut.shortcuts.push({key:this.shortcut.key,model:this.shortcut.model}):this.setFlag(2,"Shortcut model is unset"):this.setFlag(2,"Shortcut key is unset")},deleteShortcut:function(e){var t=this;this.shortcut.shortcuts.forEach((function(r,a){r.key===e.key&&t.shortcut.shortcuts.splice(a,1)}))},changeImage:function(e){this.index+=e,this.index>this.images.length-1&&(this.index=this.images.length-1),this.index<0&&(this.index=0)},removeBox:function(e,t){var r=this.boxes;r[e].splice(t,1),this.boxes=[],this.boxes=r},createLabel:function(e,t){var r=this.getCoordinates(e),a=this.getImagePosition();if(void 0!==a){var o=a.y1+r.y,i=a.x1+r.x;if(t=t||"",this.creatingLabel){this.creatingLabel=!1,t=this.creatingBox.label;var n=this.creatingBox.left,s=this.creatingBox.top;if(i<n){var c=i;i=n,n=c}if(o<s){var l=o;o=s,s=l}this.addLabel(t,n,s,i,o)}else this.startNewLabel("",o,i)}},updateCreatingLabel:function(){var e=this.getImagePosition();if(void 0!==e){var t=e.y1+this.mouse.y,r=e.x1+this.mouse.x,a=this.creatingBox.left,o=this.creatingBox.top,i=a,n=o;if(r<a){i-=a-r;var s=r;r=a,a=s+a-r}if(t<o){n-=o-t;var c=t;t=o,o=c+o-t}this.creatingBox.top=n,this.creatingBox.left=i,this.creatingBox.height=t-o,this.creatingBox.width=r-a}},startNewLabel:function(e,t,r){this.creatingBox.top=t,this.creatingBox.left=r,this.creatingBox.height=0,this.creatingBox.width=0,this.creatingBox.label=e,this.creatingLabel=!0},addLabel:function(e,t,r,a,o){void 0===this.boxes[this.index]&&(this.boxes[this.index]=[]),this.boxes[this.index].push({top:r,left:t,height:o-r,width:a-t,color:"red",label:e})},checkListeners:function(e,t){var r=this;13===t&&(e="enter"),39===t&&(e="enter"),8===t&&(e="back"),37===t&&(e="back"),27===t&&(e="escape"),this.shortcut.shortcuts.forEach((function(t){if(t.key.toLowerCase()===e.toLowerCase())if("next image"===t.model.toLowerCase())r.changeImage(1);else if("previous image"===t.model.toLowerCase())r.changeImage(-1);else if("escape"===t.model.toLowerCase())r.creatingLabel=!1,setTimeout((function(){r.creatingLabel=!1}),50);else{var a=r.getImagePosition();if(void 0===a)return;var o=a.y1+r.mouse.y,i=a.x1+r.mouse.x;r.startNewLabel(t.model,o,i)}}))},findPosition:function(e){if(void 0!==e&&"undefined"!==typeof e.offsetParent){for(var t=0,r=0;e;e=e.offsetParent)t+=e.offsetLeft,r+=e.offsetTop;return[t,r]}return void 0!==e?[e.x,e.y]:[0,0]},getCoordinates:function(e){var t,r=0,a=0;return t=this.findPosition(this.$refs.imageDetector),e||(e=window.event),e.pageX||e.pageY?(r=e.pageX,a=e.pageY):(e.clientX||e.clientY)&&(r=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),r-=t[0],a-=t[1],{x:r,y:a}},getImagePosition:function(){var e=this.$refs.imageDetector;if(void 0!==e)return{x1:e.getBoundingClientRect().left,y1:e.getBoundingClientRect().top,x2:e.getBoundingClientRect().right,y2:e.getBoundingClientRect().bottom,h:e.height,w:e.width}},trackmouse:function(e){this.mouse=this.getCoordinates(e),this.creatingLabel&&this.updateCreatingLabel()},saveProgress:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.setFlag(3,"Saving progress"),e.$store.commit("setLoading"),t.prev=2,null!==e.src&&""!==e.src){t.next=7;break}return e.$store.commit("resetLoading"),e.setFlag(2,"Path to image diretory not found"),t.abrupt("return");case 7:return r=!0===e.allowImages[0],a=!0===e.allowVideos[0],o={projectName:e.projectName,imageSrc:e.src,frameDelay:e.frameDelay,allowImages:r,allowVideos:a,maxImages:e.maxImages,boxes:e.boxes,shortcuts:e.shortcuts,images:e.images,total:e.total,index:e.index},t.next=12,G.saveProgress(o);case 12:e.setFlag(1,"Progress saved"),e.$store.commit("resetLoading"),t.next=21;break;case 16:t.prev=16,t.t0=t["catch"](2),K.error(t.t0),e.$store.commit("resetLoading"),e.setFlag(2,t.t0.message);case 21:case"end":return t.stop()}}),t,null,[[2,16]])})))()},loadProgress:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.setFlag(3,"Loading progress"),e.$store.commit("setLoading"),t.prev=2,t.next=5,G.loadProgress(e.projectName);case 5:r=t.sent,e.src=r.imageSrc,e.frameDelay=Number(r.frameDelay),e.maxImages=Number(r.maxImages),e.boxes=r.boxes,e.shortcuts=r.shortcuts,e.images=r.images,e.total=Number(r.total),e.index=Number(r.index),r.allowImages?e.allowImages[0]=!0:e.allowImages[0]=!1,r.allowVideos?e.allowVideos[0]=!0:e.allowVideos[0]=!1,e.creatingLabel=!1,e.setFlag(1,"Progress Loaded"),e.$store.commit("resetLoading"),t.next=26;break;case 21:t.prev=21,t.t0=t["catch"](2),K.error(t.t0),e.$store.commit("resetLoading"),e.setFlag(2,t.t0.message);case 26:case"end":return t.stop()}}),t,null,[[2,21]])})))()}}},Z=Q,ee=(r("1042"),Object(g["a"])(Z,j,P,!1,null,"6252fca2",null)),te=ee.exports;a["a"].use(I["a"]);var re="",ae=new I["a"]({mode:"history",base:"/",routes:[{path:"/",name:"drawer",component:te,meta:{title:"Drawer Yao"}},{path:"*",redirect:"/"}]});ae.beforeEach((function(e,t,r){if(document.title=e.meta.title,""!==re){var a=re;re="",r(a)}r()}));var oe=ae;a["a"].use(k["a"]);var ie=new k["a"].Store({plugins:[],state:{isLoading:!1},mutations:{setDevice:function(e,t){e.device=t,e.isMobile="xs"===t||"sm"===t},toggleLoading:function(e){e.isLoading=!e.isLoading,e.isLoading&&setTimeout((function(){e.isLoading=!1}),2500)},setLoading:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;e.isLoading=!0,e.isLoading&&setTimeout((function(){e.isLoading=!1}),t)},resetLoading:function(e){e.isLoading=!1}},actions:{},getters:{isLoading:function(e){return e.isLoading},isMobile:function(e){return e.isMobile},device:function(e){return e.device}}});a["a"].config.productionTip=!1,s(a["a"]);var ne="",se=function(){ne=new a["a"]({router:oe,store:ie,render:function(e){return e(C)}}).$mount("#app")};ne||se()},"7c55":function(e,t,r){"use strict";var a=r("e7f5"),o=r.n(a);o.a},ac83:function(e,t,r){},c565:function(e,t,r){"use strict";var a=r("2576"),o=r.n(a);o.a},e7f5:function(e,t,r){},ee6e:function(e,t,r){},fc1a:function(e,t,r){}});
//# sourceMappingURL=app.6cd74348.js.map